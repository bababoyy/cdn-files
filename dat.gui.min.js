!function(b,a){"object"==typeof exports&&"undefined"!=typeof module?a(exports):"function"==typeof define&&define.amd?define(["exports"],a):a(b.dat={})}(this,function(c){"use strict";function f(b,k){var a=b.__state.conversionName.toString(),c=Math.round(b.r),d=Math.round(b.g),e=Math.round(b.b),f=b.a,h=Math.round(b.h),i=b.s.toFixed(1),j=b.v.toFixed(1);if(k||"THREE_CHAR_HEX"===a||"SIX_CHAR_HEX"===a){for(var g=b.hex.toString(16);g.length<6;)g="0"+g;return"#"+g}if("CSS_RGB"===a)return"rgb("+c+","+d+","+e+")";if("CSS_RGBA"===a)return"rgba("+c+","+d+","+e+","+f+")";if("HEX"===a)return"0x"+b.hex.toString(16);if("RGB_ARRAY"===a)return"["+c+","+d+","+e+"]";if("RGBA_ARRAY"===a)return"["+c+","+d+","+e+","+f+"]";if("RGB_OBJ"===a)return"{r:"+c+",g:"+d+",b:"+e+"}";else if("RGBA_OBJ"===a)return"{r:"+c+",g:"+d+",b:"+e+",a:"+f+"}";else if("HSV_OBJ"===a)return"{h:"+h+",s:"+i+",v:"+j+"}";else if("HSVA_OBJ"===a)return"{h:"+h+",s:"+i+",v:"+j+",a:"+f+"}";return"unknown format"}var z=Array.prototype.forEach,A=Array.prototype.slice,d={BREAK:{},extend:function(a){return this.each(A.call(arguments,1),function(b){(this.isObject(b)?Object.keys(b):[]).forEach((function(c){this.isUndefined(b[c])||(a[c]=b[c])}).bind(this))},this),a},defaults:function(a){return this.each(A.call(arguments,1),function(b){(this.isObject(b)?Object.keys(b):[]).forEach((function(c){this.isUndefined(a[c])&&(a[c]=b[c])}).bind(this))},this),a},compose:function(){var a=A.call(arguments);return function(){for(var b=A.call(arguments),c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},each:function(a,c,d){if(a){if(z&&a.forEach&&a.forEach===z)a.forEach(c,d);else if(a.length===a.length+0){var b=void 0,e=void 0;for(b=0,e=a.length;b<e;b++)if(b in a&&c.call(d,a[b],b)===this.BREAK)return}else for(var f in a)if(c.call(d,a[f],f)===this.BREAK)return}},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d=void 0;return function(){var e=this,f=arguments,g=c||!d;clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b),g&&a.apply(e,f)}},toArray:function(a){return a.toArray?a.toArray():A.call(a)},isUndefined:function(a){return void 0===a},isNull:function(a){return null===a},isNaN:function(b){function a(a){return b.apply(this,arguments)}return a.toString=function(){return b.toString()},a}(function(a){return isNaN(a)}),isArray:Array.isArray||function(a){return a.constructor===Array},isObject:function(a){return a===Object(a)},isNumber:function(a){return a===a+0},isString:function(a){return a===a+""},isBoolean:function(a){return!1===a|| !0===a},isFunction:function(a){return a instanceof Function}},B=[{litmus:d.isString,conversions:{THREE_CHAR_HEX:{read:function(b){var a=b.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==a&&{space:"HEX",hex:parseInt("0x"+a[1].toString()+a[1].toString()+a[2].toString()+a[2].toString()+a[3].toString()+a[3].toString(),0)}},write:f},SIX_CHAR_HEX:{read:function(b){var a=b.match(/^#([A-F0-9]{6})$/i);return null!==a&&{space:"HEX",hex:parseInt("0x"+a[1].toString(),0)}},write:f},CSS_RGB:{read:function(b){var a=b.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==a&&{space:"RGB",r:parseFloat(a[1]),g:parseFloat(a[2]),b:parseFloat(a[3])}},write:f},CSS_RGBA:{read:function(b){var a=b.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==a&&{space:"RGB",r:parseFloat(a[1]),g:parseFloat(a[2]),b:parseFloat(a[3]),a:parseFloat(a[4])}},write:f}}},{litmus:d.isNumber,conversions:{HEX:{read:function(a){return{space:"HEX",hex:a,conversionName:"HEX"}},write:function(a){return a.hex}}}},{litmus:d.isArray,conversions:{RGB_ARRAY:{read:function(a){return 3===a.length&&{space:"RGB",r:a[0],g:a[1],b:a[2]}},write:function(a){return[a.r,a.g,a.b]}},RGBA_ARRAY:{read:function(a){return 4===a.length&&{space:"RGB",r:a[0],g:a[1],b:a[2],a:a[3]}},write:function(a){return[a.r,a.g,a.b,a.a]}}}},{litmus:d.isObject,conversions:{RGBA_OBJ:{read:function(a){return!!(d.isNumber(a.r)&&d.isNumber(a.g)&&d.isNumber(a.b)&&d.isNumber(a.a))&&{space:"RGB",r:a.r,g:a.g,b:a.b,a:a.a}},write:function(a){return{r:a.r,g:a.g,b:a.b,a:a.a}}},RGB_OBJ:{read:function(a){return!!(d.isNumber(a.r)&&d.isNumber(a.g)&&d.isNumber(a.b))&&{space:"RGB",r:a.r,g:a.g,b:a.b}},write:function(a){return{r:a.r,g:a.g,b:a.b}}},HSVA_OBJ:{read:function(a){return!!(d.isNumber(a.h)&&d.isNumber(a.s)&&d.isNumber(a.v)&&d.isNumber(a.a))&&{space:"HSV",h:a.h,s:a.s,v:a.v,a:a.a}},write:function(a){return{h:a.h,s:a.s,v:a.v,a:a.a}}},HSV_OBJ:{read:function(a){return!!(d.isNumber(a.h)&&d.isNumber(a.s)&&d.isNumber(a.v))&&{space:"HSV",h:a.h,s:a.s,v:a.v}},write:function(a){return{h:a.h,s:a.s,v:a.v}}}}}],C=void 0,D=void 0,p=function(){D=!1;var a=arguments.length>1?d.toArray(arguments):arguments[0];return d.each(B,function(b){if(b.litmus(a))return d.each(b.conversions,function(b,c){if(C=b.read(a),!1===D&& !1!==C)return D=C,C.conversionName=c,C.conversion=b,d.BREAK}),d.BREAK}),D},E=void 0,q={hsv_to_rgb:function(c,d,a){var h=c/60-Math.floor(c/60),b=a*(1-d),e=a*(1-h*d),f=a*(1-(1-h)*d),g=[[a,f,b],[e,a,b],[b,a,f],[b,e,a],[f,b,a],[a,b,e]][Math.floor(c/60)%6];return{r:255*g[0],g:255*g[1],b:255*g[2]}},rgb_to_hsv:function(b,c,d){var a=Math.max(b,c,d),e=a-Math.min(b,c,d),f=void 0,g=void 0;return 0===a?{h:NaN,s:0,v:0}:(g=e/a,f=b===a?(c-d)/e:c===a?2+(d-b)/e:4+(b-c)/e,(f/=6)<0&&(f+=1),{h:360*f,s:g,v:a/255})},rgb_to_hex:function(b,c,d){var a=this.hex_with_component(0,2,b);return a=this.hex_with_component(a,1,c),a=this.hex_with_component(a,0,d)},component_from_hex:function(a,b){return a>>8*b&255},hex_with_component:function(a,b,c){return c<<(E=8*b)|a& ~(255<<E)}},F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},G=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},H=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),I=function g(a,c,d){null===a&&(a=Function.prototype);var b=Object.getOwnPropertyDescriptor(a,c);if(void 0===b){var e=Object.getPrototypeOf(a);if(null===e)return;return g(e,c,d)}if("value"in b)return b.value;var f=b.get;if(void 0!==f)return f.call(d)},J=function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)},K=function(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&("object"==typeof a||"function"==typeof a)?a:b},b=function(){function a(){if(G(this,a),this.__state=p.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return H(a,[{key:"toString",value:function(){return f(this)}},{key:"toHexString",value:function(){return f(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),a}();function g(a,c,d){Object.defineProperty(a,c,{get:function(){return"RGB"===this.__state.space||b.recalculateRGB(this,c,d),this.__state[c]},set:function(a){"RGB"!==this.__state.space&&(b.recalculateRGB(this,c,d),this.__state.space="RGB"),this.__state[c]=a}})}function h(a,c){Object.defineProperty(a,c,{get:function(){return"HSV"===this.__state.space||b.recalculateHSV(this),this.__state[c]},set:function(a){"HSV"!==this.__state.space&&(b.recalculateHSV(this),this.__state.space="HSV"),this.__state[c]=a}})}b.recalculateRGB=function(a,b,c){if("HEX"===a.__state.space)a.__state[b]=q.component_from_hex(a.__state.hex,c);else if("HSV"===a.__state.space)d.extend(a.__state,q.hsv_to_rgb(a.__state.h,a.__state.s,a.__state.v));else throw new Error("Corrupted color state")},b.recalculateHSV=function(a){var b=q.rgb_to_hsv(a.r,a.g,a.b);d.extend(a.__state,{s:b.s,v:b.v}),d.isNaN(b.h)?d.isUndefined(a.__state.h)&&(a.__state.h=0):a.__state.h=b.h},b.COMPONENTS=["r","g","b","h","s","v","hex","a"],g(b.prototype,"r",2),g(b.prototype,"g",1),g(b.prototype,"b",0),h(b.prototype,"h"),h(b.prototype,"s"),h(b.prototype,"v"),Object.defineProperty(b.prototype,"a",{get:function(){return this.__state.a},set:function(a){this.__state.a=a}}),Object.defineProperty(b.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=q.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(a){this.__state.space="HEX",this.__state.hex=a}});var e=function(){function a(b,c){G(this,a),this.initialValue=b[c],this.domElement=document.createElement("div"),this.object=b,this.property=c,this.__onChange=void 0,this.__onFinishChange=void 0}return H(a,[{key:"onChange",value:function(a){return this.__onChange=a,this}},{key:"onFinishChange",value:function(a){return this.__onFinishChange=a,this}},{key:"setValue",value:function(a){return this.object[this.property]=a,this.__onChange&&this.__onChange.call(this,a),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),a}(),L={};d.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(a,b){d.each(a,function(a){L[a]=b})});var M=/(\d+(\.\d+)?)px/;function N(a){if("0"===a||d.isUndefined(a))return 0;var b=a.match(M);return d.isNull(b)?0:parseFloat(b[1])}var j={makeSelectable:function(a,b){void 0!==a&& void 0!==a.style&&(a.onselectstart=b?function(){return!1}:function(){},a.style.MozUserSelect=b?"auto":"none",a.style.KhtmlUserSelect=b?"auto":"none",a.unselectable=b?"on":"off")},makeFullscreen:function(a,e,f){var b=f,c=e;d.isUndefined(c)&&(c=!0),d.isUndefined(b)&&(b=!0),a.style.position="absolute",c&&(a.style.left=0,a.style.right=0),b&&(a.style.top=0,a.style.bottom=0)},fakeEvent:function(f,c,g,h){var a=g||{},e=L[c];if(!e)throw new Error("Event type "+c+" not supported.");var b=document.createEvent(e);switch(e){case"MouseEvents":var i=a.x||a.clientX||0,j=a.y||a.clientY||0;b.initMouseEvent(c,a.bubbles||!1,a.cancelable||!0,unsafeWindow,a.clickCount||1,0,0,i,j,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var k=b.initKeyboardEvent||b.initKeyEvent;d.defaults(a,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),k(c,a.bubbles||!1,a.cancelable,window,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.keyCode,a.charCode);break;default:b.initEvent(c,a.bubbles||!1,a.cancelable||!0)}d.defaults(b,h),f.dispatchEvent(b)},bind:function(a,b,c,d){return a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c),j},unbind:function(a,b,c,d){return a.removeEventListener?a.removeEventListener(b,c,d||!1):a.detachEvent&&a.detachEvent("on"+b,c),j},addClass:function(a,b){if(void 0===a.className)a.className=b;else if(a.className!==b){var c=a.className.split(/ +/);-1===c.indexOf(b)&&(c.push(b),a.className=c.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return j},removeClass:function(a,b){if(b){if(a.className===b)a.removeAttribute("class");else{var c=a.className.split(/ +/),d=c.indexOf(b);-1!==d&&(c.splice(d,1),a.className=c.join(" "))}}else a.className=void 0;return j},hasClass:function(a,b){return new RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)").test(a.className)||!1},getWidth:function(b){var a=getComputedStyle(b);return N(a["border-left-width"])+N(a["border-right-width"])+N(a["padding-left"])+N(a["padding-right"])+N(a.width)},getHeight:function(b){var a=getComputedStyle(b);return N(a["border-top-width"])+N(a["border-bottom-width"])+N(a["padding-top"])+N(a["padding-bottom"])+N(a.height)},getOffset:function(c){var a=c,b={left:0,top:0};if(a.offsetParent)do b.left+=a.offsetLeft,b.top+=a.offsetTop,a=a.offsetParent;while(a)return b},isActive:function(a){return a===document.activeElement&&(a.type||a.href)}},r=function(b){function a(c,d){G(this,a);var b=K(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c,d)),e=b;return b.__prev=b.getValue(),b.__checkbox=document.createElement("input"),b.__checkbox.setAttribute("type","checkbox"),j.bind(b.__checkbox,"change",function(){e.setValue(!e.__prev)},!1),b.domElement.appendChild(b.__checkbox),b.updateDisplay(),b}return J(a,b),H(a,[{key:"setValue",value:function(b){var c=I(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"setValue",this).call(this,b);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),c}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),I(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateDisplay",this).call(this)}}]),a}(e),s=function(b){function a(e,f,g){G(this,a);var b=K(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,f)),c=g,i=b;if(b.__select=document.createElement("select"),d.isArray(c)){var h={};d.each(c,function(a){h[a]=a}),c=h}return d.each(c,function(b,c){var a=document.createElement("option");a.innerHTML=c,a.setAttribute("value",b),i.__select.appendChild(a)}),b.updateDisplay(),j.bind(b.__select,"change",function(){var a=this.options[this.selectedIndex].value;i.setValue(a)}),b.domElement.appendChild(b.__select),b}return J(a,b),H(a,[{key:"setValue",value:function(b){var c=I(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"setValue",this).call(this,b);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),c}},{key:"updateDisplay",value:function(){return j.isActive(this.__select)?this:(this.__select.value=this.getValue(),I(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateDisplay",this).call(this))}}]),a}(e),t=function(b){function a(d,e){G(this,a);var b=K(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,d,e)),f=b;function c(){f.setValue(f.__input.value)}return b.__input=document.createElement("input"),b.__input.setAttribute("type","text"),j.bind(b.__input,"keyup",c),j.bind(b.__input,"change",c),j.bind(b.__input,"blur",function(){f.__onFinishChange&&f.__onFinishChange.call(f,f.getValue())}),j.bind(b.__input,"keydown",function(a){13===a.keyCode&&this.blur()}),b.updateDisplay(),b.domElement.appendChild(b.__input),b}return J(a,b),H(a,[{key:"updateDisplay",value:function(){return j.isActive(this.__input)||(this.__input.value=this.getValue()),I(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateDisplay",this).call(this)}}]),a}(e);function O(b){var a=b.toString();return a.indexOf(".")> -1?a.length-a.indexOf(".")-1:0}var i=function(b){function a(e,f,g){G(this,a);var b=K(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,f)),c=g||{};return b.__min=c.min,b.__max=c.max,b.__step=c.step,d.isUndefined(b.__step)?0===b.initialValue?b.__impliedStep=1:b.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(b.initialValue))/Math.LN10))/10:b.__impliedStep=b.__step,b.__precision=O(b.__impliedStep),b}return J(a,b),H(a,[{key:"setValue",value:function(c){var b=c;return void 0!==this.__min&&b<this.__min?b=this.__min:void 0!==this.__max&&b>this.__max&&(b=this.__max),void 0!==this.__step&&b%this.__step!=0&&(b=Math.round(b/this.__step)*this.__step),I(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"setValue",this).call(this,b)}},{key:"min",value:function(a){return this.__min=a,this}},{key:"max",value:function(a){return this.__max=a,this}},{key:"step",value:function(a){return this.__step=a,this.__impliedStep=a,this.__precision=O(a),this}}]),a}(e),u=function(b){function a(c,e,f){G(this,a);var b=K(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c,e,f));b.__truncationSuspended=!1;var g=b,h=void 0;function i(){g.__onFinishChange&&g.__onFinishChange.call(g,g.getValue())}function k(a){var b=h-a.clientY;g.setValue(g.getValue()+b*g.__impliedStep),h=a.clientY}function l(){j.unbind(window,"mousemove",k),j.unbind(window,"mouseup",l),i()}return b.__input=document.createElement("input"),b.__input.setAttribute("type","text"),j.bind(b.__input,"change",function(){var a=parseFloat(g.__input.value);d.isNaN(a)||g.setValue(a)}),j.bind(b.__input,"blur",function(){i()}),j.bind(b.__input,"mousedown",function(a){j.bind(window,"mousemove",k),j.bind(window,"mouseup",l),h=a.clientY}),j.bind(b.__input,"keydown",function(a){13===a.keyCode&&(g.__truncationSuspended=!0,this.blur(),g.__truncationSuspended=!1,i())}),b.updateDisplay(),b.domElement.appendChild(b.__input),b}return J(a,b),H(a,[{key:"updateDisplay",value:function(){var c,d,b;return this.__input.value=this.__truncationSuspended?this.getValue():(c=this.getValue(),b=Math.pow(10,this.__precision),Math.round(c*b)/b),I(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateDisplay",this).call(this)}}]),a}(i);function P(c,a,d,b,e){return b+(e-b)*((c-a)/(d-a))}var v=function(b){function a(c,d,e,f,g){G(this,a);var b=K(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c,d,{min:e,max:f,step:g})),h=b;function i(a){a.preventDefault();var b=h.__background.getBoundingClientRect();return h.setValue(P(a.clientX,b.left,b.right,h.__min,h.__max)),!1}function k(){j.unbind(window,"mousemove",i),j.unbind(window,"mouseup",k),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}function l(b){var c=b.touches[0].clientX,a=h.__background.getBoundingClientRect();h.setValue(P(c,a.left,a.right,h.__min,h.__max))}function m(){j.unbind(window,"touchmove",l),j.unbind(window,"touchend",m),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}return b.__background=document.createElement("div"),b.__foreground=document.createElement("div"),j.bind(b.__background,"mousedown",function(a){document.activeElement.blur(),j.bind(window,"mousemove",i),j.bind(window,"mouseup",k),i(a)}),j.bind(b.__background,"touchstart",function(a){1===a.touches.length&&(j.bind(window,"touchmove",l),j.bind(window,"touchend",m),l(a))}),j.addClass(b.__background,"slider"),j.addClass(b.__foreground,"slider-fg"),b.updateDisplay(),b.__background.appendChild(b.__foreground),b.domElement.appendChild(b.__background),b}return J(a,b),H(a,[{key:"updateDisplay",value:function(){var b=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*b+"%",I(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateDisplay",this).call(this)}}]),a}(i),w=function(b){function a(d,e,c){G(this,a);var b=K(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,d,e)),f=b;return b.__button=document.createElement("div"),b.__button.innerHTML=void 0===c?"Fire":c,j.bind(b.__button,"click",function(a){return a.preventDefault(),f.fire(),!1}),j.addClass(b.__button,"button"),b.domElement.appendChild(b.__button),b}return J(a,b),H(a,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),a}(e),x=function(c){function a(h,i){G(this,a);var c=K(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,h,i));c.__color=new b(c.getValue()),c.__temp=new b(0);var k=c;c.domElement=document.createElement("div"),j.makeSelectable(c.domElement,!1),c.__selector=document.createElement("div"),c.__selector.className="selector",c.__saturation_field=document.createElement("div"),c.__saturation_field.className="saturation-field",c.__field_knob=document.createElement("div"),c.__field_knob.className="field-knob",c.__field_knob_border="2px solid ",c.__hue_knob=document.createElement("div"),c.__hue_knob.className="hue-knob",c.__hue_field=document.createElement("div"),c.__hue_field.className="hue-field",c.__input=document.createElement("input"),c.__input.type="text",c.__input_textShadow="0 1px 1px ",j.bind(c.__input,"keydown",function(a){13===a.keyCode&&n.call(this)}),j.bind(c.__input,"blur",n),j.bind(c.__selector,"mousedown",function(){j.addClass(this,"drag").bind(window,"mouseup",function(){j.removeClass(k.__selector,"drag")})}),j.bind(c.__selector,"touchstart",function(){j.addClass(this,"drag").bind(window,"touchend",function(){j.removeClass(k.__selector,"drag")})});var f=document.createElement("div");function e(a){q(a),j.bind(window,"mousemove",q),j.bind(window,"touchmove",q),j.bind(window,"mouseup",l),j.bind(window,"touchend",l)}function g(a){r(a),j.bind(window,"mousemove",r),j.bind(window,"touchmove",r),j.bind(window,"mouseup",m),j.bind(window,"touchend",m)}function l(){j.unbind(window,"mousemove",q),j.unbind(window,"touchmove",q),j.unbind(window,"mouseup",l),j.unbind(window,"touchend",l),o()}function m(){j.unbind(window,"mousemove",r),j.unbind(window,"touchmove",r),j.unbind(window,"mouseup",m),j.unbind(window,"touchend",m),o()}function n(){var a=p(this.value);!1!==a?(k.__color.__state=a,k.setValue(k.__color.toOriginal())):this.value=k.__color.toString()}function o(){k.__onFinishChange&&k.__onFinishChange.call(k,k.__color.toOriginal())}function q(b){-1===b.type.indexOf("touch")&&b.preventDefault();var a=k.__saturation_field.getBoundingClientRect(),e=b.touches&&b.touches[0]||b,f=e.clientX,g=e.clientY,c=(f-a.left)/(a.right-a.left),d=1-(g-a.top)/(a.bottom-a.top);return d>1?d=1:d<0&&(d=0),c>1?c=1:c<0&&(c=0),k.__color.v=d,k.__color.s=c,k.setValue(k.__color.toOriginal()),!1}function r(a){-1===a.type.indexOf("touch")&&a.preventDefault();var c=k.__hue_field.getBoundingClientRect(),b=1-((a.touches&&a.touches[0]||a).clientY-c.top)/(c.bottom-c.top);return b>1?b=1:b<0&&(b=0),k.__color.h=360*b,k.setValue(k.__color.toOriginal()),!1}return d.extend(c.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),d.extend(c.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:c.__field_knob_border+(c.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),d.extend(c.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),d.extend(c.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),d.extend(f.style,{width:"100%",height:"100%",background:"none"}),R(f,"top","rgba(0,0,0,0)","#000"),d.extend(c.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),S(c.__hue_field),d.extend(c.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:c.__input_textShadow+"rgba(0,0,0,0.7)"}),j.bind(c.__saturation_field,"mousedown",e),j.bind(c.__saturation_field,"touchstart",e),j.bind(c.__field_knob,"mousedown",e),j.bind(c.__field_knob,"touchstart",e),j.bind(c.__hue_field,"mousedown",g),j.bind(c.__hue_field,"touchstart",g),c.__saturation_field.appendChild(f),c.__selector.appendChild(c.__field_knob),c.__selector.appendChild(c.__saturation_field),c.__selector.appendChild(c.__hue_field),c.__hue_field.appendChild(c.__hue_knob),c.domElement.appendChild(c.__input),c.domElement.appendChild(c.__selector),c.updateDisplay(),c}return J(a,c),H(a,[{key:"updateDisplay",value:function(){var e=p(this.getValue());if(!1!==e){var f=!1;d.each(b.COMPONENTS,function(a){if(!d.isUndefined(e[a])&&!d.isUndefined(this.__color.__state[a])&&e[a]!==this.__color.__state[a])return f=!0,{}},this),f&&d.extend(this.__color.__state,e)}d.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var a=this.__color.v<.5||this.__color.s>.5?255:0,c=255-a;d.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+a+","+a+","+a+")"}),this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px",this.__temp.s=1,this.__temp.v=1,R(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),d.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+a+","+a+","+a+")",textShadow:this.__input_textShadow+"rgba("+c+","+c+","+c+",.7)"})}}]),a}(e),Q=["-moz-","-o-","-webkit-","-ms-",""];function R(a,b,c,e){a.style.background="",d.each(Q,function(d){a.style.cssText+="background: "+d+"linear-gradient("+b+", "+c+" 0%, "+e+" 100%); "})}function S(a){a.style.background="",a.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",a.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var T=function(a,b){var c=a[b];return d.isArray(arguments[2])||d.isObject(arguments[2])?new s(a,b,arguments[2]):d.isNumber(c)?d.isNumber(arguments[2])&&d.isNumber(arguments[3])?d.isNumber(arguments[4])?new v(a,b,arguments[2],arguments[3],arguments[4]):new v(a,b,arguments[2],arguments[3]):d.isNumber(arguments[4])?new u(a,b,{min:arguments[2],max:arguments[3],step:arguments[4]}):new u(a,b,{min:arguments[2],max:arguments[3]}):d.isString(c)?new t(a,b):d.isFunction(c)?new w(a,b,""):d.isBoolean(c)?new r(a,b):null},U=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,1e3/60)},V=function(){function a(){G(this,a),this.backgroundElement=document.createElement("div"),d.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),j.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),d.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var b=this;j.bind(this.backgroundElement,"click",function(){b.hide()})}return H(a,[{key:"show",value:function(){var a=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),d.defer(function(){a.backgroundElement.style.opacity=1,a.domElement.style.opacity=1,a.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var b=this,a=function a(){b.domElement.style.display="none",b.backgroundElement.style.display="none",j.unbind(b.domElement,"webkitTransitionEnd",a),j.unbind(b.domElement,"transitionend",a),j.unbind(b.domElement,"oTransitionEnd",a)};j.bind(this.domElement,"webkitTransitionEnd",a),j.bind(this.domElement,"transitionend",a),j.bind(this.domElement,"oTransitionEnd",a),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-j.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-j.getHeight(this.domElement)/2+"px"}}]),a}(),y=function(a){if(a&&"undefined"!=typeof window){var b=document.createElement("style");return b.setAttribute("type","text/css"),b.innerHTML=a,document.head.appendChild(b),a}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");({load:function(c,d){var b=d||document,a=b.createElement("link");a.type="text/css",a.rel="stylesheet",a.href=c,b.getElementsByTagName("head")[0].appendChild(a)},inject:function(b,c){var a=document.createElement("style");a.type="text/css",a.innerHTML=b;var d=(c||document).getElementsByTagName("head")[0];try{d.appendChild(a)}catch(e){}}}).inject(y);var W="Default",X=function(){try{return!!window.localStorage}catch(a){return!1}}(),Y=void 0,Z=!0,$=void 0,_=!1,aa=[],a=function b(k){var f,c=this,a=k||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),j.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],a=d.defaults(a,{closeOnTop:!1,autoPlace:!0,width:b.DEFAULT_WIDTH}),a=d.defaults(a,{resizable:a.autoPlace,hideable:a.autoPlace}),d.isUndefined(a.load)?a.load={preset:W}:a.preset&&(a.load.preset=a.preset),d.isUndefined(a.parent)&&a.hideable&&aa.push(this),a.resizable=d.isUndefined(a.parent)&&a.resizable,a.autoPlace&&d.isUndefined(a.scrollable)&&(a.scrollable=!0);var l=X&&"true"===localStorage.getItem(ag(this,"isLocal")),g=void 0,e=void 0;if(Object.defineProperties(this,{parent:{get:function(){return a.parent}},scrollable:{get:function(){return a.scrollable}},autoPlace:{get:function(){return a.autoPlace}},closeOnTop:{get:function(){return a.closeOnTop}},preset:{get:function(){return c.parent?c.getRoot().preset:a.load.preset},set:function(b){c.parent?c.getRoot().preset=b:a.load.preset=b,am(this),c.revert()}},width:{get:function(){return a.width},set:function(b){a.width=b,ak(c,b)}},name:{get:function(){return a.name},set:function(b){a.name=b,e&&(e.innerHTML=a.name)}},closed:{get:function(){return a.closed},set:function(d){a.closed=d,a.closed?j.addClass(c.__ul,b.CLASS_CLOSED):j.removeClass(c.__ul,b.CLASS_CLOSED),this.onResize(),c.__closeButton&&(c.__closeButton.innerHTML=d?b.TEXT_OPEN:b.TEXT_CLOSED)}},load:{get:function(){return a.load}},useLocalStorage:{get:function(){return l},set:function(a){X&&(l=a,a?j.bind(window,"unload",g):j.unbind(window,"unload",g),localStorage.setItem(ag(c,"isLocal"),a))}}}),d.isUndefined(a.parent)){if(this.closed=a.closed||!1,j.addClass(this.domElement,b.CLASS_MAIN),j.makeSelectable(this.domElement,!1),X&&l){c.useLocalStorage=!0;var h=localStorage.getItem(ag(this,"gui"));h&&(a.load=JSON.parse(h))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=b.TEXT_CLOSED,j.addClass(this.__closeButton,b.CLASS_CLOSE_BUTTON),a.closeOnTop?(j.addClass(this.__closeButton,b.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(j.addClass(this.__closeButton,b.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),j.bind(this.__closeButton,"click",function(){c.closed=!c.closed})}else{void 0===a.closed&&(a.closed=!0);var i=document.createTextNode(a.name);j.addClass(i,"controller-name"),e=ab(c,i);var m=function(a){return a.preventDefault(),c.closed=!c.closed,!1};j.addClass(this.__ul,b.CLASS_CLOSED),j.addClass(e,"title"),j.bind(e,"click",m),a.closed||(this.closed=!1)}a.autoPlace&&(d.isUndefined(a.parent)&&(Z&&($=document.createElement("div"),j.addClass($,"dg"),j.addClass($,b.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild($),Z=!1),$.appendChild(this.domElement),j.addClass(this.domElement,b.CLASS_AUTO_PLACE)),this.parent||ak(c,a.width)),this.__resizeHandler=function(){c.onResizeDebounced()},j.bind(window,"resize",this.__resizeHandler),j.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),j.bind(this.__ul,"transitionend",this.__resizeHandler),j.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),a.resizable&&aj(this),g=function(){X&&"true"===localStorage.getItem(ag(c,"isLocal"))&&localStorage.setItem(ag(c,"gui"),JSON.stringify(c.getSaveObject()))},this.saveToLocalStorageIfPossible=g,a.parent||(f=c.getRoot(),f.width+=1,d.defer(function(){f.width-=1}))};function ab(b,c,d){var a=document.createElement("li");return c&&a.appendChild(c),d?b.__ul.insertBefore(a,d):b.__ul.appendChild(a),b.onResize(),a}function ac(a){j.unbind(window,"resize",a.__resizeHandler),a.saveToLocalStorageIfPossible&&j.unbind(window,"unload",a.saveToLocalStorageIfPossible)}function ad(b,c){var a=b.__preset_select[b.__preset_select.selectedIndex];c?a.innerHTML=a.value+"*":a.innerHTML=a.value}function ae(g,a){var b=g.getRoot(),c=b.__rememberedObjects.indexOf(a.object);if(-1!==c){var e=b.__rememberedObjectIndecesToControllers[c];if(void 0===e&&(e={},b.__rememberedObjectIndecesToControllers[c]=e),e[a.property]=a,b.load&&b.load.remembered){var f=b.load.remembered,d=void 0;if(f[g.preset])d=f[g.preset];else{if(!f[W])return;d=f[W]}if(d[c]&& void 0!==d[c][a.property]){var h=d[c][a.property];a.initialValue=h,a.setValue(h)}}}}function af(f,g,h,c){if(void 0===g[h])throw new Error('Object "'+g+'" has no property "'+h+'"');var b=void 0;if(c.color)b=new x(g,h);else{var m=[g,h].concat(c.factoryArgs);b=T.apply(f,m)}c.before instanceof e&&(c.before=c.before.__li),ae(f,b),j.addClass(b.domElement,"c");var k=document.createElement("span");j.addClass(k,"property-name"),k.innerHTML=b.property;var l=document.createElement("div");l.appendChild(k),l.appendChild(b.domElement);var i=ab(f,l,c.before);return j.addClass(i,a.CLASS_CONTROLLER_ROW),b instanceof x?j.addClass(i,"color"):j.addClass(i,F(b.getValue())),!function(e,b,a){if(a.__li=b,a.__gui=e,d.extend(a,{options:function(b){if(arguments.length>1){var c=a.__li.nextElementSibling;return a.remove(),af(e,a.object,a.property,{before:c,factoryArgs:[d.toArray(arguments)]})}if(d.isArray(b)||d.isObject(b)){var f=a.__li.nextElementSibling;return a.remove(),af(e,a.object,a.property,{before:f,factoryArgs:[b]})}},name:function(b){return a.__li.firstElementChild.firstElementChild.innerHTML=b,a},listen:function(){return a.__gui.listen(a),a},remove:function(){return a.__gui.remove(a),a}}),a instanceof v){var f=new u(a.object,a.property,{min:a.__min,max:a.__max,step:a.__step});d.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(b){var c=a[b],d=f[b];a[b]=f[b]=function(){var b=Array.prototype.slice.call(arguments);return d.apply(f,b),c.apply(a,b)}}),j.addClass(b,"has-slider"),a.domElement.insertBefore(f.domElement,a.domElement.firstElementChild)}else if(a instanceof u){var c=function(c){if(d.isNumber(a.__min)&&d.isNumber(a.__max)){var f=a.__li.firstElementChild.firstElementChild.innerHTML,g=a.__gui.__listening.indexOf(a)> -1;a.remove();var b=af(e,a.object,a.property,{before:a.__li.nextElementSibling,factoryArgs:[a.__min,a.__max,a.__step]});return b.name(f),g&&b.listen(),b}return c};a.min=d.compose(c,a.min),a.max=d.compose(c,a.max)}else a instanceof r?(j.bind(b,"click",function(){j.fakeEvent(a.__checkbox,"click")}),j.bind(a.__checkbox,"click",function(a){a.stopPropagation()})):a instanceof w?(j.bind(b,"click",function(){j.fakeEvent(a.__button,"click")}),j.bind(b,"mouseover",function(){j.addClass(a.__button,"hover")}),j.bind(b,"mouseout",function(){j.removeClass(a.__button,"hover")})):a instanceof x&&(j.addClass(b,"color"),a.updateDisplay=d.compose(function(c){return b.style.borderLeftColor=a.__color.toString(),c},a.updateDisplay),a.updateDisplay());a.setValue=d.compose(function(b){return e.getRoot().__preset_select&&a.isModified()&&ad(e.getRoot(),!0),b},a.setValue)}(f,i,b),f.__controllers.push(b),b}function ag(b,a){return document.location.href+"."+a}function ah(a,c,d){var b=document.createElement("option");b.innerHTML=c,b.value=c,a.__preset_select.appendChild(b),d&&(a.__preset_select.selectedIndex=a.__preset_select.length-1)}function ai(a,b){b.style.display=a.useLocalStorage?"block":"none"}function aj(b){var e=void 0;function f(a){return a.preventDefault(),b.width+=e-a.clientX,b.onResize(),e=a.clientX,!1}function g(){j.removeClass(b.__closeButton,a.CLASS_DRAG),j.unbind(window,"mousemove",f),j.unbind(window,"mouseup",g)}function c(c){return c.preventDefault(),e=c.clientX,j.addClass(b.__closeButton,a.CLASS_DRAG),j.bind(window,"mousemove",f),j.bind(window,"mouseup",g),!1}b.__resize_handle=document.createElement("div"),d.extend(b.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),j.bind(b.__resize_handle,"mousedown",c),j.bind(b.__closeButton,"mousedown",c),b.domElement.insertBefore(b.__resize_handle,b.domElement.firstElementChild)}function ak(a,b){a.domElement.style.width=b+"px",a.__save_row&&a.autoPlace&&(a.__save_row.style.width=b+"px"),a.__closeButton&&(a.__closeButton.style.width=b+"px")}function al(a,c){var b={};return d.each(a.__rememberedObjects,function(h,e){var f={},g=a.__rememberedObjectIndecesToControllers[e];d.each(g,function(a,b){f[b]=c?a.initialValue:a.getValue()}),b[e]=f}),b}function am(a){for(var b=0;b<a.__preset_select.length;b++)a.__preset_select[b].value===a.preset&&(a.__preset_select.selectedIndex=b)}function an(a){0!==a.length&&U.call(window,function(){an(a)}),d.each(a,function(a){a.updateDisplay()})}a.toggleHide=function(){_=!_,d.each(aa,function(a){a.domElement.style.display=_?"none":""})},a.CLASS_AUTO_PLACE="a",a.CLASS_AUTO_PLACE_CONTAINER="ac",a.CLASS_MAIN="main",a.CLASS_CONTROLLER_ROW="cr",a.CLASS_TOO_TALL="taller-than-window",a.CLASS_CLOSED="closed",a.CLASS_CLOSE_BUTTON="close-button",a.CLASS_CLOSE_TOP="close-top",a.CLASS_CLOSE_BOTTOM="close-bottom",a.CLASS_DRAG="drag",a.DEFAULT_WIDTH=245,a.TEXT_CLOSED="Close Controls",a.TEXT_OPEN="Open Controls",a._keydownHandler=function(b){"text"!==document.activeElement.type&&(72===b.which||72===b.keyCode)&&a.toggleHide()},j.bind(window,"keydown",a._keydownHandler,!1),d.extend(a.prototype,{add:function(a,b){return af(this,a,b,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(a,b){return af(this,a,b,{color:!0})},remove:function(a){this.__ul.removeChild(a.__li),this.__controllers.splice(this.__controllers.indexOf(a),1);var b=this;d.defer(function(){b.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&$.removeChild(this.domElement);var b=this;d.each(this.__folders,function(a){b.removeFolder(a)}),j.unbind(window,"keydown",a._keydownHandler,!1),ac(this)},addFolder:function(b){if(void 0!==this.__folders[b])throw new Error('You already have a folder in this GUI by the name "'+b+'"');var c={name:b,parent:this};c.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[b]&&(c.closed=this.load.folders[b].closed,c.load=this.load.folders[b]);var d=new a(c);this.__folders[b]=d;var e=ab(this,d.domElement);return j.addClass(e,"folder"),d},removeFolder:function(a){this.__ul.removeChild(a.domElement.parentElement),delete this.__folders[a.name],this.load&&this.load.folders&&this.load.folders[a.name]&&delete this.load.folders[a.name],ac(a);var b=this;d.each(a.__folders,function(b){a.removeFolder(b)}),d.defer(function(){b.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var b=this.getRoot();if(b.scrollable){var c=j.getOffset(b.__ul).top,e=0;d.each(b.__ul.childNodes,function(a){b.autoPlace&&a===b.__save_row||(e+=j.getHeight(a))}),window.innerHeight-c-20<e?(j.addClass(b.domElement,a.CLASS_TOO_TALL),b.__ul.style.height=window.innerHeight-c-20+"px"):(j.removeClass(b.domElement,a.CLASS_TOO_TALL),b.__ul.style.height="auto")}b.__resize_handle&&d.defer(function(){b.__resize_handle.style.height=b.__ul.offsetHeight+"px"}),b.__closeButton&&(b.__closeButton.style.width=b.width+"px")},onResizeDebounced:d.debounce(function(){this.onResize()},50),remember:function(){if(d.isUndefined(Y)&&((Y=new V).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var a=this;d.each(Array.prototype.slice.call(arguments),function(b){0===a.__rememberedObjects.length&&function m(a){var b=a.__save_row=document.createElement("li");j.addClass(a.domElement,"has-save"),a.__ul.insertBefore(b,a.__ul.firstChild),j.addClass(b,"save-row");var g=document.createElement("span");g.innerHTML="&nbsp;",j.addClass(g,"button gears");var c=document.createElement("span");c.innerHTML="Save",j.addClass(c,"button"),j.addClass(c,"save");var e=document.createElement("span");e.innerHTML="New",j.addClass(e,"button"),j.addClass(e,"save-as");var f=document.createElement("span");f.innerHTML="Revert",j.addClass(f,"button"),j.addClass(f,"revert");var h=a.__preset_select=document.createElement("select");if(a.load&&a.load.remembered?d.each(a.load.remembered,function(c,b){ah(a,b,b===a.preset)}):ah(a,W,!1),j.bind(h,"change",function(){for(var b=0;b<a.__preset_select.length;b++)a.__preset_select[b].innerHTML=a.__preset_select[b].value;a.preset=this.value}),b.appendChild(h),b.appendChild(g),b.appendChild(c),b.appendChild(e),b.appendChild(f),X){var k=document.getElementById("dg-local-explain"),i=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(ag(a,"isLocal"))&&i.setAttribute("checked","checked"),ai(a,k),j.bind(i,"change",function(){a.useLocalStorage=!a.useLocalStorage,ai(a,k)})}var l=document.getElementById("dg-new-constructor");j.bind(l,"keydown",function(a){a.metaKey&&(67===a.which||67===a.keyCode)&&Y.hide()}),j.bind(g,"click",function(){l.innerHTML=JSON.stringify(a.getSaveObject(),void 0,2),Y.show(),l.focus(),l.select()}),j.bind(c,"click",function(){a.save()}),j.bind(e,"click",function(){var b=prompt("Enter a new preset name.");b&&a.saveAs(b)}),j.bind(f,"click",function(){a.revert()})}(a),-1===a.__rememberedObjects.indexOf(b)&&a.__rememberedObjects.push(b)}),this.autoPlace&&ak(this,this.width)},getRoot:function(){for(var a=this;a.parent;)a=a.parent;return a},getSaveObject:function(){var a=this.load;return a.closed=this.closed,this.__rememberedObjects.length>0&&(a.preset=this.preset,a.remembered||(a.remembered={}),a.remembered[this.preset]=al(this)),a.folders={},d.each(this.__folders,function(b,c){a.folders[c]=b.getSaveObject()}),a},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=al(this),ad(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(a){this.load.remembered||(this.load.remembered={},this.load.remembered[W]=al(this,!0)),this.load.remembered[a]=al(this),this.preset=a,ah(this,a,!0),this.saveToLocalStorageIfPossible()},revert:function(a){d.each(this.__controllers,function(b){this.getRoot().load.remembered?ae(a||this.getRoot(),b):b.setValue(b.initialValue),b.__onFinishChange&&b.__onFinishChange.call(b,b.getValue())},this),d.each(this.__folders,function(a){a.revert(a)}),a||ad(this.getRoot(),!1)},listen:function(a){var b=0===this.__listening.length;this.__listening.push(a),b&&an(this.__listening)},updateDisplay:function(){d.each(this.__controllers,function(a){a.updateDisplay()}),d.each(this.__folders,function(a){a.updateDisplay()})}});var k={Color:b,math:q,interpret:p},l={Controller:e,BooleanController:r,OptionController:s,StringController:t,NumberController:i,NumberControllerBox:u,NumberControllerSlider:v,FunctionController:w,ColorController:x},m={dom:j},n={GUI:a},o=a;c.color=k,c.controllers=l,c.dom=m,c.gui=n,c.GUI=o,c.default={color:k,controllers:l,dom:m,gui:n,GUI:o},Object.defineProperty(c,"__esModule",{value:!0})})
